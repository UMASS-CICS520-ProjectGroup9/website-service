{% load static %}

<article class="post">
  <section>
    <h3>My Discussions Lists</h3>

    {% if discussions %}
      <p>
        Showing {{ discussions|length }} discussion{% if discussions|length != 1 %}s{% endif %}.
      </p>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Title</th>
              <th>Content</th>
              <th>Author</th>
              <th style="width: 150px;">Created At</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for d in discussions %}
              <tr>
                <td>{{ d.title }}</td>
                <td>{{ d.body|truncatechars:50 }}</td> <td>{{ d.author }}</td>
                <td>
                  {% if d.created_at_display %}
                    {{ d.created_at_display }}
                  {% else %}
                    {{ d.created_at|date:'Y-m-d H:i' }}
                  {% endif %}
                </td>
                <td>
                  <a href="{% url 'discussion_detail' d.id %}">more detail</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p>No discussions found.</p>
    {% endif %}
  </section>

  <hr style="border-top: 1px dashed rgba(160,160,160,0.3); margin: 2em 0;" />

  <section>
    <h3>My Comments Lists</h3>

    {% if comments %}
      <p>
        Showing {{ comments|length }} comment{% if comments|length != 1 %}s{% endif %}.
      </p>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Discussion</th>
              <th>Content</th>
              <th>Author</th>
              <th style="width: 150px;">Created At</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for comment in comments %}
              <tr>
                <td>{{ comment.discussion_title }}</td>
                <td>{{ comment.body }}</td>
                <td>{{ comment.author }}</td>
                <td>
                  {% if comment.created_at_display %}
                    {{ comment.created_at_display }}
                  {% else %}
                    {{ comment.created_at|date:'Y-m-d H:i' }}
                  {% endif %}
                </td>
                <td>
                  <a href="{% url 'discussion_detail' comment.discussion %}">more detail</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p>No comments found.</p>
    {% endif %}
  </section>
</article>
