{% load static %}

<!-- Sidebar -->
<section id="sidebar">

    <!-- Intro -->
    <section id="intro">
        <a href="#" class="logo"><img src="{% static 'images/logo.jpg' %}" alt="" /></a>
        <header>
            <h2>Today's Events</h2>
            <p>Looking for a fun and engaging way to stay active? Join our Ping Pong events!</p>

            <ul>


                <form id="search" method="get" action="/events/search/">
                    <input type="text" name="query" placeholder="Search by keywords" />


                    <ul class="actions">
                        <button type="submit" class="button">Search</button>
                        <!-- <li><a href="#" class="button">Search</a></li> -->
                    </ul>
                </form>
                <!-- <a class="fa-search" href="#search">Search</a> -->

            </ul>
        </header>
    </section>





    <!-- sort by -->

    <section class="blurb">
        <h3>Sort By</h3>
        <div class="col-12">
            <select name="demo-category" id="sort-category">
                <option value=""></option>
                <option value="/events/sorted_by_creation_date/">Event Created Date</option>
                <option value="/events/sorted_by_start_date/">Event start Date</option>
                <option value="/events/sorted_by_end_date/">Event End Date</option>
                <option value="/events/sorted_by_update_date/">Event Update Date</option>
            </select>
        </div>
        <br>
        <ul class="actions">
            <li><a id="sort-go" href="#" class="button">GO</a></li>
        </ul>
    </section>
    <script>
        const select = document.getElementById('sort-category');
        const go = document.getElementById('sort-go');
        select.addEventListener('change', () => {
            go.href = select.value || '#';
        });
    </script>
    <!-- sort by -->

    <section class="blurb">
        <h3>Filter By</h3>
        <div class="col-12">
            <select name="demo-category" id="filter-category">
                <option value="">Selectâ€¦</option>
                <option value="creator">Creator</option>
                <option value="eventType">Event Type</option>
                <option value="location">Location</option>
                <option value="hosted_by">Host</option>
                <option value="min_capacity">Min Capacity</option>
                <option value="max_capacity">Max Capacity</option>
            </select>
        </div>
        <form id="filter-form" method="get" action="{% url 'events' %}filters/">
            <input type="text" id="filter-query" name="value" placeholder="Input Value..." />
            <input type="hidden" name="filter" id="filter-hidden" />
        </form>

        <ul class="actions">
            <li><a id="filter-go" href="#" class="button">GO</a></li>
        </ul>
    </section>
    <script>
        const selectFilter = document.getElementById('filter-category');
        const inputValue = document.getElementById('filter-query');
        const goFilter = document.getElementById('filter-go');
        const hiddenFilter = document.getElementById('filter-hidden');

        function updateFilterLink() {
            hiddenFilter.value = selectFilter.value;
            const params = new URLSearchParams();
            if (selectFilter.value) params.set('filter', selectFilter.value);
            if (inputValue.value.trim()) params.set('value', inputValue.value.trim());
            goFilter.href = `{% url 'events' %}` + (params.toString() ? `?${params}` : '');
        }

        selectFilter.addEventListener('change', updateFilterLink);
        inputValue.addEventListener('input', updateFilterLink);
        goFilter.addEventListener('click', (e) => {
            e.preventDefault();
            updateFilterLink();
            document.getElementById('filter-form').submit();
        });
    </script>
    <!-- Create Event -->
    <section class="blurb">
        <h2>Sharing your Events Now</h2>
        <ul class="actions">
            <li><a href="{% url 'events' %}create/" class="button">Create an Event</a></li>
        </ul>
    </section>
    {% include '../../base_components/footer.html' %}

</section>